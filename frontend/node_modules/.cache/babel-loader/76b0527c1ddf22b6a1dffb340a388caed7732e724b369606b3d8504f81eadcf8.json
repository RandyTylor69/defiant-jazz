{"ast":null,"code":"// Imports Axios\nconst axios = require(\"axios\");\n\n// Downloads works (JSON)\nexports.works = async function (start, amount) {\n  // Creates array of JSON elements\n  var workList = [];\n\n  // Gets as many as 'amount'\n  for (var i = 0; i < amount; i++) {\n    // Creates HTTP request to ISMLP API\n    axios.get(`https://imslp.org/imslpscripts/API.ISCR.php?account=worklist/disclaimer=accepted/sort=id/type=2/start=${start}/retformat=json`).then(function (response) {\n      // Creates a new JSON object\n      var obj = {\n        id: \"\",\n        composer: \"\",\n        title: \"\",\n        links: {\n          work: \"\",\n          composer: \"\"\n        }\n      };\n\n      // Adds data\n      obj.id = response.data[i].id;\n      obj.composer = response.data[i].intvals.composer;\n      obj.title = response.data[i].intvals.worktitle;\n\n      // Might as well have a sub-object for links!\n      obj.links = {};\n      obj.links.work = response.data[i].permlink;\n      obj.links.composer = `https://imslp.org/wiki/${response.data[i].parent}`.replace(/ /g, \"_\");\n\n      // Pushes the object to the array\n      workList.push(obj);\n    }).catch(function (error) {\n      return console.error(error);\n    }).finally(() => {\n      // Returns the array when done\n      if (workList.length === amount) return workList;\n    });\n  }\n};","map":{"version":3,"names":["axios","require","exports","works","start","amount","workList","i","get","then","response","obj","id","composer","title","links","work","data","intvals","worktitle","permlink","parent","replace","push","catch","error","console","finally","length"],"sources":["C:/UWO/Summer-Projects/Backend-as-well/defiant-jazz/frontend/node_modules/imslp-api/scripts/works.js"],"sourcesContent":["// Imports Axios\nconst axios = require(\"axios\");\n\n// Downloads works (JSON)\nexports.works = async function (start, amount) {\n  // Creates array of JSON elements\n  var workList = [];\n\n  // Gets as many as 'amount'\n  for (var i = 0; i < amount; i++) {\n    // Creates HTTP request to ISMLP API\n    axios\n      .get(\n        `https://imslp.org/imslpscripts/API.ISCR.php?account=worklist/disclaimer=accepted/sort=id/type=2/start=${start}/retformat=json`\n      )\n      .then(function (response) {\n        // Creates a new JSON object\n        var obj = {\n          id: \"\",\n          composer: \"\",\n          title: \"\",\n          links: {\n            work: \"\",\n            composer: \"\",\n          },\n        };\n\n        // Adds data\n        obj.id = response.data[i].id;\n        obj.composer = response.data[i].intvals.composer;\n        obj.title = response.data[i].intvals.worktitle;\n\n        // Might as well have a sub-object for links!\n        obj.links = {};\n        obj.links.work = response.data[i].permlink;\n        obj.links.composer = `https://imslp.org/wiki/${response.data[i].parent}`.replace(\n          / /g,\n          \"_\"\n        );\n\n        // Pushes the object to the array\n        workList.push(obj);\n      })\n      .catch(function (error) {\n        return console.error(error);\n      })\n      .finally(() => {\n        // Returns the array when done\n        if (workList.length === amount) return workList;\n      });\n  }\n};\n"],"mappings":"AAAA;AACA,MAAMA,KAAK,GAAGC,OAAO,CAAC,OAAO,CAAC;;AAE9B;AACAC,OAAO,CAACC,KAAK,GAAG,gBAAgBC,KAAK,EAAEC,MAAM,EAAE;EAC7C;EACA,IAAIC,QAAQ,GAAG,EAAE;;EAEjB;EACA,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,MAAM,EAAEE,CAAC,EAAE,EAAE;IAC/B;IACAP,KAAK,CACFQ,GAAG,CACF,yGAAyGJ,KAAK,iBAChH,CAAC,CACAK,IAAI,CAAC,UAAUC,QAAQ,EAAE;MACxB;MACA,IAAIC,GAAG,GAAG;QACRC,EAAE,EAAE,EAAE;QACNC,QAAQ,EAAE,EAAE;QACZC,KAAK,EAAE,EAAE;QACTC,KAAK,EAAE;UACLC,IAAI,EAAE,EAAE;UACRH,QAAQ,EAAE;QACZ;MACF,CAAC;;MAED;MACAF,GAAG,CAACC,EAAE,GAAGF,QAAQ,CAACO,IAAI,CAACV,CAAC,CAAC,CAACK,EAAE;MAC5BD,GAAG,CAACE,QAAQ,GAAGH,QAAQ,CAACO,IAAI,CAACV,CAAC,CAAC,CAACW,OAAO,CAACL,QAAQ;MAChDF,GAAG,CAACG,KAAK,GAAGJ,QAAQ,CAACO,IAAI,CAACV,CAAC,CAAC,CAACW,OAAO,CAACC,SAAS;;MAE9C;MACAR,GAAG,CAACI,KAAK,GAAG,CAAC,CAAC;MACdJ,GAAG,CAACI,KAAK,CAACC,IAAI,GAAGN,QAAQ,CAACO,IAAI,CAACV,CAAC,CAAC,CAACa,QAAQ;MAC1CT,GAAG,CAACI,KAAK,CAACF,QAAQ,GAAG,0BAA0BH,QAAQ,CAACO,IAAI,CAACV,CAAC,CAAC,CAACc,MAAM,EAAE,CAACC,OAAO,CAC9E,IAAI,EACJ,GACF,CAAC;;MAED;MACAhB,QAAQ,CAACiB,IAAI,CAACZ,GAAG,CAAC;IACpB,CAAC,CAAC,CACDa,KAAK,CAAC,UAAUC,KAAK,EAAE;MACtB,OAAOC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;IAC7B,CAAC,CAAC,CACDE,OAAO,CAAC,MAAM;MACb;MACA,IAAIrB,QAAQ,CAACsB,MAAM,KAAKvB,MAAM,EAAE,OAAOC,QAAQ;IACjD,CAAC,CAAC;EACN;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}